Understood. Below is a **refined and role-segregated functional design** incorporating your requirement that **Special Charges are maintained separately by Admin**, while **Accountant handles invoicing only**. This aligns well with internal control, audit compliance, and enterprise accounting practices.

---

## 1. Role-Based Responsibility Matrix

| Role           | Responsibility                                      |
| -------------- | --------------------------------------------------- |
| **Admin**      | Define, update, and approve Special Charges         |
| **Accountant** | Generate, review, and post customer invoices        |
| **System**     | Enforce charge locking, validation, and audit trail |

---

## 2. Special Charges Management (Admin Module)

### Module Name

**Special Charges Master / Transaction Charges**

### Purpose

Allow Admin users to pre-define or update additional charges **before invoicing**, without giving invoice users the ability to alter financial components.

### Features

#### A. Charge Creation / Update

Admin can:

* Select Customer (or All Customers)
* Select Period (From – To)
* Define Charge:

  * Charge Name (Fuel Surcharge, Peak Season Charge, etc.)
  * Charge Type:

    * Flat Amount
    * Percentage
  * Charge Value
  * Tax Applicable (Yes / No)
* Charge Scope:

  * Invoice Level (default)
* Status:

  * Draft
  * Approved
  * Cancelled

#### B. Approval Control

* Charges must be **Approved** to be applied
* Draft or Cancelled charges are ignored during invoicing

#### C. Locking Rules

* Once an invoice is generated using a charge:

  * Charge becomes **locked**
  * Any modification requires:

    * New charge entry
    * New effective period

---

## 3. Invoicing Process (Accountant Module)

### Behaviour Change

* Accountant **cannot add or edit special charges**
* System automatically:

  * Fetches applicable **Approved Special Charges**
  * Based on:

    * Customer
    * Invoice Period
* Charges appear as **read-only** in invoice preview

### Invoice Preview Screen

* AWB Charges Summary
* Auto-applied Special Charges
* Tax breakup
* Grand Total
* Audit reference of charge source

---

## 4. Charge Application Logic

```
If SpecialCharge.Status = Approved
AND InvoiceDate BETWEEN Charge.FromDate AND Charge.ToDate
AND Customer matches
THEN Apply Charge
```

Priority:

1. Customer-specific charge
2. Global charge (All Customers)
3. No overlap allowed (system validation)

---

## 5. Data Model (Recommended)

### SpecialCharges Table

* SpecialChargeID
* CustomerID (NULL = All)
* ChargeName
* ChargeType (Flat / Percentage)
* ChargeValue
* FromDate
* ToDate
* TaxApplicable
* Status
* CreatedBy
* CreatedDate
* ApprovedBy
* ApprovedDate

---

### InvoiceChargeLink Table

* InvoiceID
* SpecialChargeID
* ChargeAmount
* TaxAmount

---

## 6. Audit & Compliance Benefits

* Clear segregation of duties
* Prevention of unauthorized financial manipulation
* Full traceability of charge origin
* Period-based charge governance
* Clean reconciliation during audits

---

## 7. UI Flow Summary

**Admin**

```
Masters → Special Charges → Create / Approve
```

**Accountant**

```
Billing → Customer Invoicing → Generate Invoice → Review (Read-Only Charges) → Post
```

---

## 8. Optional Enhancements (Future)

* Charge templates (Fuel, Peak, Remote Area)
* Automatic expiry alerts for charges
* Charge impact preview before approval
* Role-based email alerts

---

If you want, I can next:

* Convert this into **DB DDL scripts**
* Design **UI wireframes**
* Map **GL posting logic**
* Align with **GST / VAT rules**

Let me know how you want to proceed.
