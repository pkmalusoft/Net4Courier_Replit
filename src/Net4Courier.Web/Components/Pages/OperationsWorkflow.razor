@page "/operations-workflow"
@using MudBlazor
@inject NavigationManager Navigation
@rendermode InteractiveServer

<PageTitle>Daily Operations Workflow</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large" Class="py-4">
    <MudPaper Elevation="2" Class="pa-6 mb-4">
        <MudStack Row="true" Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center" Class="mb-4">
            <MudStack>
                <MudText Typo="Typo.h4">Daily Operations Workflow</MudText>
                <MudText Typo="Typo.subtitle1" Color="Color.Secondary">Step-by-step guide for daily courier operations</MudText>
            </MudStack>
            <MudButton Variant="Variant.Outlined" Color="Color.Secondary" StartIcon="@Icons.Material.Filled.Settings"
                       OnClick="@(() => Navigation.NavigateTo("/setup-guide"))">Setup Guide</MudButton>
        </MudStack>

        <MudAlert Severity="Severity.Info" Class="mb-4" Icon="@Icons.Material.Filled.Info">
            This guide covers the typical daily workflow from shipment booking to delivery and invoicing.
        </MudAlert>

        <MudTimeline TimelinePosition="TimelinePosition.Start">
            @* Step 1: AWB Entry / Booking *@
            <MudTimelineItem Color="Color.Primary" Variant="Variant.Filled" Size="Size.Medium">
                <ItemOpposite>
                    <MudText Typo="Typo.subtitle2" Color="Color.Primary">Step 1</MudText>
                </ItemOpposite>
                <ItemContent>
                    <MudCard Elevation="1" Class="mb-4">
                        <MudCardHeader>
                            <CardHeaderContent>
                                <MudText Typo="Typo.h6">AWB Entry / Booking</MudText>
                            </CardHeaderContent>
                            <CardHeaderActions>
                                <MudIconButton Icon="@Icons.Material.Filled.OpenInNew" Color="Color.Primary"
                                               OnClick="@(() => Navigation.NavigateTo("/awb-entry"))" />
                            </CardHeaderActions>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudText Class="mb-2">Create new shipment with complete details:</MudText>
                            <MudList T="string" Dense="true">
                                <MudListItem Icon="@Icons.Material.Filled.Numbers">AWB Number (auto-generated or manual)</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Person">Shipper & Consignee details</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Scale">Weight, dimensions, pieces</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.LocalShipping">Service type & shipment mode</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.AttachMoney">COD amount (if applicable)</MudListItem>
                            </MudList>
                            <MudAlert Severity="Severity.Info" Dense="true" Class="mt-2">Status: Shipment Created</MudAlert>
                        </MudCardContent>
                        <MudCardActions>
                            <MudButton Variant="Variant.Text" Color="Color.Primary" 
                                       OnClick="@(() => Navigation.NavigateTo("/awb-entry"))">Go to AWB Entry</MudButton>
                        </MudCardActions>
                    </MudCard>
                </ItemContent>
            </MudTimelineItem>

            @* Step 2: Pickup Management *@
            <MudTimelineItem Color="Color.Secondary" Variant="Variant.Filled" Size="Size.Medium">
                <ItemOpposite>
                    <MudText Typo="Typo.subtitle2" Color="Color.Secondary">Step 2</MudText>
                </ItemOpposite>
                <ItemContent>
                    <MudCard Elevation="1" Class="mb-4">
                        <MudCardHeader>
                            <CardHeaderContent>
                                <MudText Typo="Typo.h6">Pickup Management</MudText>
                            </CardHeaderContent>
                            <CardHeaderActions>
                                <MudIconButton Icon="@Icons.Material.Filled.OpenInNew" Color="Color.Primary"
                                               OnClick="@(() => Navigation.NavigateTo("/pickup-management"))" />
                            </CardHeaderActions>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudText Class="mb-2">Schedule and confirm pickups:</MudText>
                            <MudList T="string" Dense="true">
                                <MudListItem Icon="@Icons.Material.Filled.Schedule">Create pickup request</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.PersonPin">Assign courier for pickup</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.CheckCircle">Confirm pickup completion</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.CameraAlt">Capture pickup proof (optional)</MudListItem>
                            </MudList>
                            <MudAlert Severity="Severity.Info" Dense="true" Class="mt-2">Status: Picked Up</MudAlert>
                        </MudCardContent>
                        <MudCardActions>
                            <MudButton Variant="Variant.Text" Color="Color.Primary"
                                       OnClick="@(() => Navigation.NavigateTo("/pickup-management"))">Go to Pickup Management</MudButton>
                        </MudCardActions>
                    </MudCard>
                </ItemContent>
            </MudTimelineItem>

            @* Step 3: Origin Inscan *@
            <MudTimelineItem Color="Color.Tertiary" Variant="Variant.Filled" Size="Size.Medium">
                <ItemOpposite>
                    <MudText Typo="Typo.subtitle2" Color="Color.Tertiary">Step 3</MudText>
                </ItemOpposite>
                <ItemContent>
                    <MudCard Elevation="1" Class="mb-4">
                        <MudCardHeader>
                            <CardHeaderContent>
                                <MudText Typo="Typo.h6">Origin Inscan</MudText>
                            </CardHeaderContent>
                            <CardHeaderActions>
                                <MudIconButton Icon="@Icons.Material.Filled.OpenInNew" Color="Color.Primary"
                                               OnClick="@(() => Navigation.NavigateTo("/pickup-inscan"))" />
                            </CardHeaderActions>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudText Class="mb-2">Receive shipments at origin hub:</MudText>
                            <MudList T="string" Dense="true">
                                <MudListItem Icon="@Icons.Material.Filled.QrCodeScanner">Scan AWB barcode</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Scale">Verify weight & dimensions</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.CheckCircle">Confirm physical condition</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Sort">Sort for destination</MudListItem>
                            </MudList>
                            <MudAlert Severity="Severity.Info" Dense="true" Class="mt-2">Status: Received at Origin</MudAlert>
                        </MudCardContent>
                        <MudCardActions>
                            <MudButton Variant="Variant.Text" Color="Color.Primary"
                                       OnClick="@(() => Navigation.NavigateTo("/pickup-inscan"))">Go to Inscan</MudButton>
                        </MudCardActions>
                    </MudCard>
                </ItemContent>
            </MudTimelineItem>

            @* Step 4: Manifest & Outscan *@
            <MudTimelineItem Color="Color.Info" Variant="Variant.Filled" Size="Size.Medium">
                <ItemOpposite>
                    <MudText Typo="Typo.subtitle2" Color="Color.Info">Step 4</MudText>
                </ItemOpposite>
                <ItemContent>
                    <MudCard Elevation="1" Class="mb-4">
                        <MudCardHeader>
                            <CardHeaderContent>
                                <MudText Typo="Typo.h6">Manifest & Outscan</MudText>
                            </CardHeaderContent>
                            <CardHeaderActions>
                                <MudIconButton Icon="@Icons.Material.Filled.OpenInNew" Color="Color.Primary"
                                               OnClick="@(() => Navigation.NavigateTo("/outscan"))" />
                            </CardHeaderActions>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudText Class="mb-2">Create manifest and dispatch shipments:</MudText>
                            <MudList T="string" Dense="true">
                                <MudListItem Icon="@Icons.Material.Filled.ListAlt">Create manifest for destination</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Add">Add AWBs to manifest</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.LocalShipping">Assign vehicle & driver</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.ExitToApp">Close manifest and outscan</MudListItem>
                            </MudList>
                            <MudAlert Severity="Severity.Info" Dense="true" Class="mt-2">Status: In Transit</MudAlert>
                        </MudCardContent>
                        <MudCardActions>
                            <MudButton Variant="Variant.Text" Color="Color.Primary"
                                       OnClick="@(() => Navigation.NavigateTo("/outscan"))">Go to Manifest/Outscan</MudButton>
                        </MudCardActions>
                    </MudCard>
                </ItemContent>
            </MudTimelineItem>

            @* Step 5: DRS (Delivery Run Sheet) *@
            <MudTimelineItem Color="Color.Warning" Variant="Variant.Filled" Size="Size.Medium">
                <ItemOpposite>
                    <MudText Typo="Typo.subtitle2" Color="Color.Warning">Step 5</MudText>
                </ItemOpposite>
                <ItemContent>
                    <MudCard Elevation="1" Class="mb-4">
                        <MudCardHeader>
                            <CardHeaderContent>
                                <MudText Typo="Typo.h6">DRS (Delivery Run Sheet)</MudText>
                            </CardHeaderContent>
                            <CardHeaderActions>
                                <MudIconButton Icon="@Icons.Material.Filled.OpenInNew" Color="Color.Primary"
                                               OnClick="@(() => Navigation.NavigateTo("/drs-submission"))" />
                            </CardHeaderActions>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudText Class="mb-2">Assign shipments to courier for delivery:</MudText>
                            <MudList T="string" Dense="true">
                                <MudListItem Icon="@Icons.Material.Filled.Assignment">Create DRS for courier</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Add">Add AWBs to DRS</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.PersonPin">Assign delivery courier</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Print">Print DRS sheet</MudListItem>
                            </MudList>
                            <MudAlert Severity="Severity.Info" Dense="true" Class="mt-2">Status: Out for Delivery</MudAlert>
                        </MudCardContent>
                        <MudCardActions>
                            <MudButton Variant="Variant.Text" Color="Color.Primary"
                                       OnClick="@(() => Navigation.NavigateTo("/drs-submission"))">Go to DRS</MudButton>
                        </MudCardActions>
                    </MudCard>
                </ItemContent>
            </MudTimelineItem>

            @* Step 6: POD (Proof of Delivery) *@
            <MudTimelineItem Color="Color.Success" Variant="Variant.Filled" Size="Size.Medium">
                <ItemOpposite>
                    <MudText Typo="Typo.subtitle2" Color="Color.Success">Step 6</MudText>
                </ItemOpposite>
                <ItemContent>
                    <MudCard Elevation="1" Class="mb-4">
                        <MudCardHeader>
                            <CardHeaderContent>
                                <MudText Typo="Typo.h6">POD (Proof of Delivery)</MudText>
                            </CardHeaderContent>
                            <CardHeaderActions>
                                <MudIconButton Icon="@Icons.Material.Filled.OpenInNew" Color="Color.Primary"
                                               OnClick="@(() => Navigation.NavigateTo("/pod"))" />
                            </CardHeaderActions>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudText Class="mb-2">Capture delivery confirmation:</MudText>
                            <MudList T="string" Dense="true">
                                <MudListItem Icon="@Icons.Material.Filled.Person">Receiver name & relation</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Draw">Capture signature</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.CameraAlt">Take delivery photo</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.AccessTime">Record delivery time</MudListItem>
                            </MudList>
                            <MudAlert Severity="Severity.Success" Dense="true" Class="mt-2">Status: Delivered / POD Completed</MudAlert>
                        </MudCardContent>
                        <MudCardActions>
                            <MudButton Variant="Variant.Text" Color="Color.Primary"
                                       OnClick="@(() => Navigation.NavigateTo("/pod"))">Go to POD</MudButton>
                        </MudCardActions>
                    </MudCard>
                </ItemContent>
            </MudTimelineItem>

            @* Step 7: RTS Handling *@
            <MudTimelineItem Color="Color.Error" Variant="Variant.Filled" Size="Size.Medium">
                <ItemOpposite>
                    <MudText Typo="Typo.subtitle2" Color="Color.Error">Step 7</MudText>
                </ItemOpposite>
                <ItemContent>
                    <MudCard Elevation="1" Class="mb-4">
                        <MudCardHeader>
                            <CardHeaderContent>
                                <MudText Typo="Typo.h6">RTS (Return to Shipper)</MudText>
                            </CardHeaderContent>
                            <CardHeaderActions>
                                <MudIconButton Icon="@Icons.Material.Filled.OpenInNew" Color="Color.Primary"
                                               OnClick="@(() => Navigation.NavigateTo("/rts-list"))" />
                            </CardHeaderActions>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudText Class="mb-2">Handle undeliverable shipments:</MudText>
                            <MudList T="string" Dense="true">
                                <MudListItem Icon="@Icons.Material.Filled.Report">Record non-delivery reason</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Undo">Initiate RTS process</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.LocalShipping">Return shipment to origin</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.CheckCircle">Confirm return delivery</MudListItem>
                            </MudList>
                            <MudAlert Severity="Severity.Warning" Dense="true" Class="mt-2">Status: RTO In Progress / RTO Delivered</MudAlert>
                        </MudCardContent>
                        <MudCardActions>
                            <MudButton Variant="Variant.Text" Color="Color.Primary"
                                       OnClick="@(() => Navigation.NavigateTo("/rts-list"))">Go to RTS List</MudButton>
                        </MudCardActions>
                    </MudCard>
                </ItemContent>
            </MudTimelineItem>

            @* Step 8: Invoice & Billing *@
            <MudTimelineItem Color="Color.Primary" Variant="Variant.Filled" Size="Size.Medium">
                <ItemOpposite>
                    <MudText Typo="Typo.subtitle2" Color="Color.Primary">Step 8</MudText>
                </ItemOpposite>
                <ItemContent>
                    <MudCard Elevation="1" Class="mb-4">
                        <MudCardHeader>
                            <CardHeaderContent>
                                <MudText Typo="Typo.h6">Invoice & Billing</MudText>
                            </CardHeaderContent>
                            <CardHeaderActions>
                                <MudIconButton Icon="@Icons.Material.Filled.OpenInNew" Color="Color.Primary"
                                               OnClick="@(() => Navigation.NavigateTo("/invoices"))" />
                            </CardHeaderActions>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudText Class="mb-2">Generate invoices for customers:</MudText>
                            <MudList T="string" Dense="true">
                                <MudListItem Icon="@Icons.Material.Filled.Receipt">Create invoice for delivered shipments</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Calculate">Verify charges & taxes</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Email">Email invoice to customer</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Payment">Record payment receipt</MudListItem>
                            </MudList>
                            <MudAlert Severity="Severity.Info" Dense="true" Class="mt-2">Status: Invoice Posted</MudAlert>
                        </MudCardContent>
                        <MudCardActions>
                            <MudButton Variant="Variant.Text" Color="Color.Primary"
                                       OnClick="@(() => Navigation.NavigateTo("/invoices"))">Go to Invoices</MudButton>
                        </MudCardActions>
                    </MudCard>
                </ItemContent>
            </MudTimelineItem>

            @* Step 9: COD Remittance *@
            <MudTimelineItem Color="Color.Dark" Variant="Variant.Filled" Size="Size.Medium">
                <ItemOpposite>
                    <MudText Typo="Typo.subtitle2">Step 9</MudText>
                </ItemOpposite>
                <ItemContent>
                    <MudCard Elevation="1" Class="mb-4">
                        <MudCardHeader>
                            <CardHeaderContent>
                                <MudText Typo="Typo.h6">COD Remittance</MudText>
                            </CardHeaderContent>
                            <CardHeaderActions>
                                <MudIconButton Icon="@Icons.Material.Filled.OpenInNew" Color="Color.Primary"
                                               OnClick="@(() => Navigation.NavigateTo("/cod-remittance"))" />
                            </CardHeaderActions>
                        </MudCardHeader>
                        <MudCardContent>
                            <MudText Class="mb-2">Collect COD from couriers and remit to customers:</MudText>
                            <MudList T="string" Dense="true">
                                <MudListItem Icon="@Icons.Material.Filled.AttachMoney">Collect COD from courier</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.AccountBalance">Deposit to bank account</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Send">Remit COD to customer</MudListItem>
                                <MudListItem Icon="@Icons.Material.Filled.Receipt">Generate COD statement</MudListItem>
                            </MudList>
                            <MudAlert Severity="Severity.Success" Dense="true" Class="mt-2">Status: COD Collected / COD Remitted</MudAlert>
                        </MudCardContent>
                        <MudCardActions>
                            <MudButton Variant="Variant.Text" Color="Color.Primary"
                                       OnClick="@(() => Navigation.NavigateTo("/cod-remittance"))">Go to COD Remittance</MudButton>
                        </MudCardActions>
                    </MudCard>
                </ItemContent>
            </MudTimelineItem>
        </MudTimeline>

        <MudDivider Class="my-4" />

        <MudPaper Class="pa-4" Style="background-color: #e3f2fd;">
            <MudText Typo="Typo.h6" Class="mb-2">Quick Links</MudText>
            <MudStack Row="true" Spacing="2" Class="flex-wrap">
                <MudButton Variant="Variant.Outlined" Size="Size.Small" StartIcon="@Icons.Material.Filled.Dashboard"
                           OnClick="@(() => Navigation.NavigateTo("/pickup-dashboard"))">Pickup Dashboard</MudButton>
                <MudButton Variant="Variant.Outlined" Size="Size.Small" StartIcon="@Icons.Material.Filled.Search"
                           OnClick="@(() => Navigation.NavigateTo("/tracking"))">Track Shipment</MudButton>
                <MudButton Variant="Variant.Outlined" Size="Size.Small" StartIcon="@Icons.Material.Filled.List"
                           OnClick="@(() => Navigation.NavigateTo("/awb-list"))">AWB List</MudButton>
                <MudButton Variant="Variant.Outlined" Size="Size.Small" StartIcon="@Icons.Material.Filled.Assessment"
                           OnClick="@(() => Navigation.NavigateTo("/ar-reports"))">Reports</MudButton>
            </MudStack>
        </MudPaper>
    </MudPaper>
</MudContainer>
