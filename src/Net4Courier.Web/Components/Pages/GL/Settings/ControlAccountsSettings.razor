@page "/gl/control-accounts"
@attribute [Authorize]

@using Microsoft.AspNetCore.Authorization
@using Truebooks.Platform.Core.MultiTenancy

@inject ITenantContext TenantContext
@inject ISnackbar Snackbar

<PageTitle>Control Account Configuration</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-4">
    <MudText Typo="Typo.h4" Class="mb-2">Control Account Configuration</MudText>
    <MudText Typo="Typo.body2" Color="Color.Secondary" Class="mb-4">
        Configure which Chart of Accounts are designated as control accounts for financial period management and reconciliation.
    </MudText>
    
    <MudAlert Severity="Severity.Info" Class="mb-4">
        Control account configuration is managed through the Chart of Accounts. 
        Use the <MudLink Href="/gl/chart-of-accounts">Chart of Accounts</MudLink> page to designate accounts as control accounts.
    </MudAlert>
    
    <MudGrid>
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4">
                <MudText Typo="Typo.h6" Class="mb-3">
                    <MudIcon Icon="@Icons.Material.Filled.AccountBalanceWallet" Class="mr-2" />
                    Accounts Receivable (AR)
                </MudText>
                <MudDivider Class="mb-3" />
                <MudText Typo="Typo.body2" Color="Color.Secondary">
                    Asset account that tracks total customer receivables. Set this in the Chart of Accounts by marking an asset account as a control account.
                </MudText>
            </MudPaper>
        </MudItem>
        
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4">
                <MudText Typo="Typo.h6" Class="mb-3">
                    <MudIcon Icon="@Icons.Material.Filled.Receipt" Class="mr-2" />
                    Accounts Payable (AP)
                </MudText>
                <MudDivider Class="mb-3" />
                <MudText Typo="Typo.body2" Color="Color.Secondary">
                    Liability account that tracks total vendor payables. Set this in the Chart of Accounts by marking a liability account as a control account.
                </MudText>
            </MudPaper>
        </MudItem>
        
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4">
                <MudText Typo="Typo.h6" Class="mb-3">
                    <MudIcon Icon="@Icons.Material.Filled.Inventory2" Class="mr-2" />
                    Inventory
                </MudText>
                <MudDivider Class="mb-3" />
                <MudText Typo="Typo.body2" Color="Color.Secondary">
                    Asset account that tracks inventory value. Set this in the Chart of Accounts by marking an asset account as a control account.
                </MudText>
            </MudPaper>
        </MudItem>
        
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4">
                <MudText Typo="Typo.h6" Class="mb-3">
                    <MudIcon Icon="@Icons.Material.Filled.ShoppingCart" Class="mr-2" />
                    Cost of Goods Sold
                </MudText>
                <MudDivider Class="mb-3" />
                <MudText Typo="Typo.body2" Color="Color.Secondary">
                    Expense account for cost of goods sold. Set this in the Chart of Accounts by marking an expense account as a control account.
                </MudText>
            </MudPaper>
        </MudItem>
        
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4">
                <MudText Typo="Typo.h6" Class="mb-3">
                    <MudIcon Icon="@Icons.Material.Filled.Savings" Class="mr-2" />
                    Retained Earnings
                </MudText>
                <MudDivider Class="mb-3" />
                <MudText Typo="Typo.body2" Color="Color.Secondary">
                    Equity account for retained earnings. Set this in the Chart of Accounts by marking an equity account as a control account.
                </MudText>
            </MudPaper>
        </MudItem>
        
        <MudItem xs="12" md="6">
            <MudPaper Class="pa-4">
                <MudText Typo="Typo.h6" Class="mb-3">
                    <MudIcon Icon="@Icons.Material.Filled.PlayArrow" Class="mr-2" />
                    Opening Balance Equity
                </MudText>
                <MudDivider Class="mb-3" />
                <MudText Typo="Typo.body2" Color="Color.Secondary">
                    Equity account for opening balance adjustments. Set this in the Chart of Accounts by marking an equity account as a control account.
                </MudText>
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    private Guid GetTenantId() => TenantContext.TenantId ?? Guid.Parse("11111111-1111-1111-1111-111111111111");
}
