@page "/"

<PageTitle>Dashboard - Net4Courier</PageTitle>

<MudText Typo="Typo.h4" GutterBottom="true">Dashboard</MudText>
<MudText Typo="Typo.subtitle1" Class="mb-4" Color="Color.Secondary">Welcome to Net4Courier Management System</MudText>

<MudGrid>
    <MudItem xs="12" sm="6" md="3">
        <MudPaper Class="pa-4" Elevation="2">
            <div class="d-flex justify-space-between align-center">
                <div>
                    <MudText Typo="Typo.subtitle2" Color="Color.Secondary">Total Shipments</MudText>
                    <MudText Typo="Typo.h4">1,245</MudText>
                </div>
                <MudAvatar Color="Color.Primary" Size="Size.Large">
                    <MudIcon Icon="@Icons.Material.Filled.LocalShipping" />
                </MudAvatar>
            </div>
            <MudText Typo="Typo.caption" Color="Color.Success" Class="mt-2">
                <MudIcon Icon="@Icons.Material.Filled.TrendingUp" Size="Size.Small" /> +12% from last month
            </MudText>
        </MudPaper>
    </MudItem>
    
    <MudItem xs="12" sm="6" md="3">
        <MudPaper Class="pa-4" Elevation="2">
            <div class="d-flex justify-space-between align-center">
                <div>
                    <MudText Typo="Typo.subtitle2" Color="Color.Secondary">Pending Deliveries</MudText>
                    <MudText Typo="Typo.h4">156</MudText>
                </div>
                <MudAvatar Color="Color.Warning" Size="Size.Large">
                    <MudIcon Icon="@Icons.Material.Filled.PendingActions" />
                </MudAvatar>
            </div>
            <MudText Typo="Typo.caption" Color="Color.Warning" Class="mt-2">
                <MudIcon Icon="@Icons.Material.Filled.Schedule" Size="Size.Small" /> 23 urgent
            </MudText>
        </MudPaper>
    </MudItem>
    
    <MudItem xs="12" sm="6" md="3">
        <MudPaper Class="pa-4" Elevation="2">
            <div class="d-flex justify-space-between align-center">
                <div>
                    <MudText Typo="Typo.subtitle2" Color="Color.Secondary">Total Revenue</MudText>
                    <MudText Typo="Typo.h4">$45.2K</MudText>
                </div>
                <MudAvatar Color="Color.Success" Size="Size.Large">
                    <MudIcon Icon="@Icons.Material.Filled.AttachMoney" />
                </MudAvatar>
            </div>
            <MudText Typo="Typo.caption" Color="Color.Success" Class="mt-2">
                <MudIcon Icon="@Icons.Material.Filled.TrendingUp" Size="Size.Small" /> +8% from last month
            </MudText>
        </MudPaper>
    </MudItem>
    
    <MudItem xs="12" sm="6" md="3">
        <MudPaper Class="pa-4" Elevation="2">
            <div class="d-flex justify-space-between align-center">
                <div>
                    <MudText Typo="Typo.subtitle2" Color="Color.Secondary">Active Customers</MudText>
                    <MudText Typo="Typo.h4">89</MudText>
                </div>
                <MudAvatar Color="Color.Info" Size="Size.Large">
                    <MudIcon Icon="@Icons.Material.Filled.People" />
                </MudAvatar>
            </div>
            <MudText Typo="Typo.caption" Color="Color.Info" Class="mt-2">
                <MudIcon Icon="@Icons.Material.Filled.PersonAdd" Size="Size.Small" /> 5 new this week
            </MudText>
        </MudPaper>
    </MudItem>
</MudGrid>

<MudGrid Class="mt-4">
    <MudItem xs="12" md="8">
        <MudPaper Class="pa-4" Elevation="2">
            <MudText Typo="Typo.h6" GutterBottom="true">Recent Shipments</MudText>
            <MudTable Items="@_recentShipments" Hover="true" Striped="true" Dense="true">
                <HeaderContent>
                    <MudTh>AWB No</MudTh>
                    <MudTh>Customer</MudTh>
                    <MudTh>Destination</MudTh>
                    <MudTh>Status</MudTh>
                    <MudTh>Date</MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd DataLabel="AWB No">@context.AwbNo</MudTd>
                    <MudTd DataLabel="Customer">@context.Customer</MudTd>
                    <MudTd DataLabel="Destination">@context.Destination</MudTd>
                    <MudTd DataLabel="Status">
                        <MudChip T="string" Color="@GetStatusColor(context.Status)" Size="Size.Small">@context.Status</MudChip>
                    </MudTd>
                    <MudTd DataLabel="Date">@context.Date.ToString("dd/MM/yyyy")</MudTd>
                </RowTemplate>
            </MudTable>
        </MudPaper>
    </MudItem>
    
    <MudItem xs="12" md="4">
        <MudPaper Class="pa-4" Elevation="2">
            <MudText Typo="Typo.h6" GutterBottom="true">Quick Actions</MudText>
            <MudStack Spacing="2">
                <MudButton Variant="Variant.Filled" Color="Color.Primary" FullWidth="true" StartIcon="@Icons.Material.Filled.Add" Href="/awb/new">
                    New AWB Entry
                </MudButton>
                <MudButton Variant="Variant.Outlined" Color="Color.Primary" FullWidth="true" StartIcon="@Icons.Material.Filled.Search" Href="/awb">
                    Track Shipment
                </MudButton>
                <MudButton Variant="Variant.Outlined" Color="Color.Secondary" FullWidth="true" StartIcon="@Icons.Material.Filled.Description" Href="/invoices">
                    Generate Invoice
                </MudButton>
                <MudButton Variant="Variant.Outlined" Color="Color.Info" FullWidth="true" StartIcon="@Icons.Material.Filled.Assessment" Href="/reports">
                    View Reports
                </MudButton>
            </MudStack>
        </MudPaper>
    </MudItem>
</MudGrid>

@code {
    private List<ShipmentRow> _recentShipments = new()
    {
        new ShipmentRow { AwbNo = "AWB001234", Customer = "ABC Trading Co.", Destination = "Dubai", Status = "In Transit", Date = DateTime.Today.AddDays(-1) },
        new ShipmentRow { AwbNo = "AWB001235", Customer = "XYZ Enterprises", Destination = "Abu Dhabi", Status = "Delivered", Date = DateTime.Today.AddDays(-2) },
        new ShipmentRow { AwbNo = "AWB001236", Customer = "Global Logistics", Destination = "Sharjah", Status = "Pending", Date = DateTime.Today },
        new ShipmentRow { AwbNo = "AWB001237", Customer = "Fast Express", Destination = "Ajman", Status = "In Transit", Date = DateTime.Today },
        new ShipmentRow { AwbNo = "AWB001238", Customer = "Prime Shipping", Destination = "RAK", Status = "Pending", Date = DateTime.Today.AddDays(-1) }
    };

    private Color GetStatusColor(string status) => status switch
    {
        "Delivered" => Color.Success,
        "In Transit" => Color.Primary,
        "Pending" => Color.Warning,
        _ => Color.Default
    };

    private class ShipmentRow
    {
        public string AwbNo { get; set; } = "";
        public string Customer { get; set; } = "";
        public string Destination { get; set; } = "";
        public string Status { get; set; } = "";
        public DateTime Date { get; set; }
    }
}
