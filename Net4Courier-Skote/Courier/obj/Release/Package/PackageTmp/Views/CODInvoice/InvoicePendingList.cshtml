@model Net4Courier.Models.InvoiceAllParam
@{
    int i = 1;
    var _decimal = @Session["Decimal"].ToString();
}

<script type="text/javascript">
    function redrawgrid(obj) {
        debugger;
        var customer = $(obj).attr('customerid');
        var statuschecked = $(obj).prop('checked');
        
        $.ajax({
            type: "POST",
            url: "/CustomerInvoice/ShownvoicePending",
            datatype: "html",
            data: { CustomerId: customer, statuschecked: statuschecked },
            success: function (response) {
                $("#pendingcontainer").html(response);
            }
        });
    }
    function redrawgridall() {
        debugger;
        var customer = 0;
        var statuschecked = $('#GeneratetallCheck').prop('checked');

        $.ajax({
            type: "POST",
            url: "/CustomerInvoice/ShownvoicePending",
            datatype: "html",
            data: { CustomerId: 0, statuschecked: statuschecked },
            success: function (response) {
                $("#pendingcontainer").html(response);
                setTimeout(function () {
                    $('#GeneratetallCheck').prop('checked', statuschecked);
                }, 300)

            }
        });
    }
    $(document).ready(function () {

        //$('#DetailsTable tfoot th').each(function () {
        //    var title = $(this).text();
        //    $(this).html('<input type="text" style=width:100% />');
        //});


        //var table1 = $('#DetailsTable').DataTable({ "sPaginationType": "simple" });
        var table1 = $('#DetailsTable').DataTable({ "paging": false, "sPaginationType": "simple", "aaSorting": [0,"desc"] ,"destroy":true });

        //table1.columns().every(function () {
        //    var that = this;

        //    $('input', this.footer()).on('keyup change', function () {
        //        if (that.search() !== this.value) {
        //            that
        //                .search(this.value)
        //                .draw();
        //        }
        //    });
        //});
    });
</script>
<table border="1" style="margin-top: 15px; " class="table table-bordered table-responsive" id="DetailsTable">
    @*<table class="table table-responsive table-bordered tblfont" role="grid" style="min-width: 100%" >*@

    @*<table class="table" style="min-width: 100%">*@
    <thead class="input-table">
        <tr>
            <th><input type="checkbox" style="width:20px;" class="Selectall" id="GeneratetallCheck" value="0" name="GeneratetallCheck" onchange ="redrawgridall()" /></th>
            <th width="20px">                
                S.No
            </th>
            <th>
                Customer Name
            </th>
            <th width="100px">
                Total AWB
            </th>
            <th>
                Courier Charge
            </th>
            <th>
                Other Charge
            </th>
            <th>
                Total
            </th>
        </tr>
    </thead>
    <tbody class="input-table" id="listbody">
        @foreach (var item in Model.Details)
        {

            <tr>
                <td>
                    @Html.CheckBoxFor(model => model.Details[i - 1].CustomerChecked, new { @class = "checkfilter calfield", style = "margin-left:10px;", @customerid = item.CustomerId, @id = "customerchecked_" + @i, @onchange = "redrawgrid(this)" })
                </td>
                <td>                    
                    @i
                </td>
                <td>
                    @item.CustomerName
                </td>
                <td style="text-align:right">
                    @item.TotalAWB
                </td>
                <td style="text-align:right">
                    @Net4Courier.Models.CommonFunctions.GetDecimalFormat(@item.CourierCharge, "2")
                </td>
                <td style="text-align:right">
                    @Net4Courier.Models.CommonFunctions.GetDecimalFormat(@item.OtherCharge, "2")

                </td>
                <td style="text-align:right">
                    @Net4Courier.Models.CommonFunctions.GetDecimalFormat(@item.NetTototal, "2")
                </td>
            </tr>
            i++;

        }
    </tbody>
</table>


