@model Net4Courier.Models.BankReconcSearch
@{
    int i = 0;
    var _decimal = @Session["Decimal"].ToString();
}

<style>
    .Receipt{
        color:blue;
    }
    .Payment{
        color:red;
    }
</style>
<script type="text/javascript">
    //millions format
    function addCommas(nStr) {

        nStr += '';
        var x = nStr.split('.');
        var x1 = x[0];
        var x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + ',' + '$2');
        }
        return x1 + x2;
    }
    function ValidateTotal() {
    debugger;
    var TotalAmount = 0;
    
    var idtext = 'hdnAmount_';
    var amt = 0;

 
   
        $('[id^=' + idtext + ']').each(function (index, item) {
            debugger;
        var id = $(item).attr('id').split('_')[1];
        if ($(item).val() == "" || $(item).val() == null) {
            $(item).val(0);
        }
        var itemval = $(item).val();
        itemval = itemval.replace(',', '');

        if ($('#hdnVoucherType_' + index).val() == 'Receipt') {

             TotalAmount = parseFloat(TotalAmount) + parseFloat(itemval);

        }
        else {
             TotalAmount = parseFloat(TotalAmount) - parseFloat(itemval);
        }

            $('#spantotal').html(addCommas(parseFloat(TotalAmount).toFixed(2)));
            if (TotalAmount < 0) {
                $('#spantotal').addClass('Payment');
                $('#spantotal').removeClass('Receipt');
            }
            else {
                $('#spantotal').removeClass('Payment');
                $('#spantotal').addClass('Receipt');
            }

});


    }
    $(document).ready(function () {


        var table1 = $('#DetailsTable1').DataTable({ "paging": false, "sPaginationType": "simple" });

        //table1.columns().every(function () {
        //    var that = this;

        //    $('input', this.footer()).on('keyup change', function () {
        //        if (that.search() !== this.value) {
        //            that
        //                .search(this.value)
        //                .draw();
        //        }
        //    });
        //});
        ValidateTotal();
    });
</script>

<table class="table table-bordered table-responsive" id="DetailsTable1" style="background-color: white">

    <thead>
        <tr class="table-light">
         
            <th width="5%">Voucher Date</th>
           
            <th width="18%">Particulars</th>
            
            <th width="10%">Amount</th>
             
        </tr>
        
    </thead>
    <tbody class="input-table" id="csvtablebody">
        
        @foreach (var item in Model.CSVDetails)
        {
            <tr class="@item.VoucherType">
                <td>


                    @Html.HiddenFor(model => model.Details[i].Remarks, new { @Value = @item.VoucherType, @id = "hdnDescription_" + @i })
                    @Html.HiddenFor(model => model.Details[i].Debit, new { @Value = @item.Debit, @id = "hdnDebit_" + @i })
                    @Html.HiddenFor(model => model.Details[i].Credit, new { @Value = @item.Credit, @id = "hdnCredit_" + @i })
                    @Html.HiddenFor(model => model.Details[i].VoucherDate, new { @Value = @item.VoucherDate, @id = "hdnVoucherDate_" + @i })
                    @Html.HiddenFor(model => model.Details[i].ReconcDate, new { @Value = @item.ReconcDate, @id = "hdnReconcDate_" + @i })

                    @Net4Courier.Models.CommonFunctions.GetShortDateFormat(@item.VoucherDate)
                </td>                
                <td>
                   
                    @item.Remarks
                </td>
                
                                    
            
                <td class="text-right">
                    @{
                        if (@item.Debit > 0)
                        {
                                        <span class="Receipt">@Net4Courier.Models.CommonFunctions.GetFormatNumber(@item.Debit, _decimal)</span>
                        }
                        else
                        {
                <span class="Payment">@Net4Courier.Models.CommonFunctions.GetFormatNumber(@item.Credit, _decimal)</span>
                        }
                    }
                    </td>
                
            </tr>
            i++;
        }




    </tbody>

</table>

<script>
 

</script>
