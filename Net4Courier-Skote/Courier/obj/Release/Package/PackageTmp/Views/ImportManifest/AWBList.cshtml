@model Net4Courier.Models.ImportManifestSearch
@{

    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript">
    $(document).ready(function () {

        //$('#DetailsTable tfoot th').each(function () {
        //    var title = $(this).text();
        //    $(this).html('<input type="text" style=width:100% />');
        //});


        var table1 = $('#DetailsTable').DataTable({ "paging": false, "sPaginationType": "simple" });

        //table1.columns().every(function () {
        //    var that = this;

        //    $('input', this.footer()).on('keyup change', function () {
        //        if (that.search() !== this.value) {
        //            that
        //                .search(this.value)
        //                .draw();
        //        }
        //    });
        //});
    });
</script>
<section class="container-fluid over_hide">

    <h1 class="titles_head">Import Manifest AWB</h1>

</section>
@using (@Html.BeginForm("AWBList", "ImportManifest", FormMethod.Post))
{
    <div class="container-fluid">
        <div class="row no_mar_cre">
            <div class="col-md-2">
                <label class="lab_ora">Search AWBNo</label>
                @Html.TextBoxFor(model => model.AWBNo, new { @class = "form-control text-right ora_border" })
                                
            </div>

            <div class="pull-left" style=" padding-right:15px;padding-left:15px;">
                @*<a class="btn btn-primary btnwidth" href="Javascript:void(0)" style="width: 60px!Important;min-width: 50px!important;" onclick="location.href='@Url.Action("Index", "QuickAWB")?StatusId=' + $('#StatusId').val() + '&FromDate=' + $('#FromDate').val() + '&ToDate=' + $('#ToDate').val()"><i class="fa fa-refresh" aria-hidden="true"></i></a>*@
                <button class="refresh_img small_btn_mar" type="submit" id="btnsearch"> <img src="/Content/img/refresh.png" alt="logolarge"></button>
            </div>
            <div class="pull-right" style="padding-top:32px;">
                <p class="indexbtnpadding">
                    @Html.ActionLink("Cancel", "Index", null, new { @class = "btn btn-dark btnwidth" })
                    @Html.ActionLink("Create New", "Create", null, new { @class = "btn btn-primary btnwidth", @Title = "Create Not allowed in the previous financial year" })


                </p>
            </div>
        </div>
    </div>
    <hr />
    <div class="row">

        <table class="table table-responsive table-bordered tblfont" role="grid" style="min-width: 100%" id="DetailsTable">

            @*<table class="table" style="min-width: 100%">*@
            <thead class="input-table">
                <tr>
                    <th width="20px">
                        S.No
                    </th>
                    <th>
                        AWB & Date
                    </th>
                    <th>
                        Shipper
                    </th>
                    <th>
                        Receiver  & Contact
                    </th>
                    <th width="100px">
                        Receiver Address
                    </th>
                    <th>
                        City
                    </th>
                    <th width="100px">
                        Destination Country
                    </th>
                    <th>
                        Bag.No
                    </th>
                    <th>
                        Contents
                    </th>
                    <th>
                        PCS
                    </th>
                    <th>
                        Weight
                    </th>
                    <th>
                        Customs Value
                    </th>
                    <th>
                        COD
                    </th>
                    <th>
                        Currency
                    </th>
                    <th></th>

                </tr>
            </thead>
            <tbody class="input-table" id="listbody">
                @foreach (var item in Model.Details1)
                {
                    <tr>
                        <td>
                            @item.Sno
                        </td>
                        <td>
                            @item.AWBNo
                            <br />
                            @Net4Courier.Models.CommonFunctions.GetShortDateFormat(item.AWBDate1)
                        </td>

                        <td>
                            @item.Shipper
                        </td>
                        <td> <strong> @item.Receiver </strong><br /> Cnt: @item.ReceiverContact </td>
                        <td>@item.ReceiverAddress</td>
                        <td>@item.DestinationCity </td>
                        <td>@item.DestinationCountry </td>
                        <td>
                            @item.Bag
                        </td>
                        <td>
                            @item.Content
                        </td>
                        <td>
                            @item.Pcs
                        </td>
                        <td>
                            @item.Weight
                        </td>
                        <td>@item.Value</td>
                        <td>
                            @item.COD
                        </td>
                        <td>
                            @item.Currency
                        </td>
                        <td>
                            <a href="#" onclick="Delete(ID=@item.ShipmentDetailID)"><i class="fa fa-times"></i></a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
<script>
        function Delete(ID) {
            if (confirm("Are you sure, You want to Delete Shipment?")) {
                //window.location.href = "/AWB/DeleteConfirmed/?id=" + ID;

                  $.ajax({
                        url: "@Url.Action("DeleteShipment", "ImportManifest")",
                        data: { id: ID },
                        type: "GET",
                        dataType: "json",
                        success: function (response) {

                        if (response.Status == "OK") {
                        $.notify(response.Message,"success");
                            setTimeout(function () {
                                $('#btnsearch').trigger('click');
                        @*location.href = '@Url.Action("AWBList", "ImportManifest")';*@
                        },100)
                        }
                        else {
                        $.notify(response.Message,"error");
                        }

                        },
                        error: function () {
                        alert("Failed! Please try again.");
                        }
                        });
                        }
    }
</script>