@model Net4Courier.Models.MCPaymentVoucherVM
@{
    int i = 0;
    var _decimal = @Session["Decimal"].ToString();
}
<script type="text/javascript">
    $(document).ready(function () {
        $("#AWBSelectall").change(function () {
            var i = 0;
            debugger;
            var selectall = false;
            if ($(this).prop("checked") == true) {
                i = 1;
                selectall = true;
                $("#awbtablebody tr").addClass('Selected');
                $(".checkfilter").prop('checked', true);
            } else {
                $("#awbtablebody tr").removeClass('Selected');
                $(".checkfilter").prop('checked', false);
                selectall = false;
            }


            var maxrow = $('#awbtablebody > tr').length;
            for (var i = 0; i < maxrow; i++) {
                $('#awbchecked__' + i).attr('checked', selectall);
                if ((i + 1) == maxrow) {
                    debugger;
                    // gettotal();
                }
            }

        });


       


         var table1 = $('#DetailsTable').DataTable({ "paging": false, "sPaginationType": "simple" });

        //table1.columns().every(function () {
        //    var that = this;

        //    $('input', this.footer()).on('keyup change', function () {
        //        if (that.search() !== this.value) {
        //            that
        //                .search(this.value)
        //                .draw();
        //        }
        //    });
        //});
    });
</script>
<table class="table table-bordered table-responsive" id="DetailsTable" style="background-color: white">

    <thead>
        
    <th width="5%">
        SNo.
        <input type="checkbox" style="width:20px;" class="Selectall" id="AWBSelectall" value="0" name="Selectall" />
    </th>
    <th width="9%">AWB No.</th>
    <th width="9%">AWB Date</th>
    <th width="23%">Consignee</th>
    <th width="23%">Consignee Country</th>
    <th width="10%">Material Cost</th>
    <th width="10%">Received Amount</th>
    <th width="10%">Paid Amount</th>
    <th></th>

    </thead>
    <tbody class="input-table" id="awbtablebody">

        @foreach (var item in Model.Details)
        {
            <tr>
                
                <td>
                    @(i + 1)
                    @Html.CheckBoxFor(model => model.Details[i].AWBChecked, new { @class = "checkfilter calfield", style = "margin-left:5px;", @consignor = item.Consignor, @id = "awbchecked_" + @i })
                    @Html.HiddenFor(model => model.Details[i].MCPaymentVoucherDetailID, new { @Value = @item.MCPaymentVoucherDetailID, @id = "hdnID_" + @i })

                    @Html.HiddenFor(model => model.Details[i].AWBNo, new { @Value = @item.AWBNo, @id = "hdnAWBNo_" + @i })
                    @Html.HiddenFor(model => model.Details[i].InScanID, new { @Value = @item.InScanID, @id = "hdnInScanID_" + @i })
                    @Html.HiddenFor(model => model.Details[i].Consignor, new { @Value = @item.Consignor, @id = "hdnConsignor1_" + @i })

                </td>
                <td>

                    @item.AWBNo

                </td>
                <td>
                    @Net4Courier.Models.CommonFunctions.GetShortDateFormat(item.AWBDate)
                </td>
                <td>
                    @item.Consignee
                </td>
                <td>
                    @item.ConsigneeCountry
                </td>
                <td class="text-right">
                    @Net4Courier.Models.CommonFunctions.GetFormatNumber(@item.MCAmount, _decimal)
                </td>
                <td class="text-right">
                    @Net4Courier.Models.CommonFunctions.GetFormatNumber(@item.Receivedmount, _decimal)
                </td>
                <td class="text-right">
                    @Net4Courier.Models.CommonFunctions.GetFormatNumber(@item.PaidAmount, _decimal)
                </td>
                <td>
                    <a href="#" class="text-danger" onclick="DeleteAWB(ID=@item.MCPaymentVoucherDetailID,VoucherID=@item.MCPaymentVoucherID)"><i class="mdi mdi-delete font-size-18"></i></a>
                </td>

            </tr>
            i++;
        }




    </tbody>

</table>

<script type="text/javascript">
    function DeleteAWB(ID,VoucherID) {
        if (confirm("Are you sure, You want to Delete AWB Print Voucher?")) {
            window.location.href = "/MCPaymentVoucher/DeleteAWBConfirmed?DetailId=" + ID + "&VoucherID=" + VoucherID;
        }
    }
</script>
 