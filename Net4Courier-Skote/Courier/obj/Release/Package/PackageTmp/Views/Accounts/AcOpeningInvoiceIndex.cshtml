@model IEnumerable<Net4Courier.Models.AcInvoiceOpeningVM>

@{
    ViewBag.Title = "List";
    ViewBag.pTitle = "Invoice Opening Balance";
    ViewBag.pageTitle = "Invoice Opening Balance";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var _decimal = @Session["Decimal"].ToString();
}


<script type="text/javascript">
    
    $(document).ready(function () {
        $('#dataTables-example tfoot th').each(function () {
            var title = $(this).text();
            $(this).html('<input type="text" style="width:100%" />');
        });
        var table = $('#dataTables-example').DataTable({ "sPaginationType": "full_numbers" });

        table.columns().every(function () {
            var that = this;

            $('input', this.footer()).on('keyup change', function () {
                if (that.search() !== this.value) {
                    that
                        .search(this.value)
                        .draw();
                }
            });
        });
  

    

    

    });
    
    function setThreeNumberDecimal(obj) {
        $(obj).val(parseFloat($(obj).val()).toFixed(3));
    }
</script>



<div class="card">
<div class="card-body">
    <div class="row">
        <div class="col-md-2">
        <div class="mb-2">
            <label class="col-form-label">Total Debit</label>
            <input class="form-control text-right" style="color:#000000" type="text" value="@ViewBag.TotalDebit" readonly />
        </div>
        </div>
        <div class="col-md-2">
          <div class="mb-2">
            <label class="col-form-label">Total Credit</label>
            <input type="text" class="form-control text-right" style="color:orangered" value="@ViewBag.TotalCredit" readonly />
        </div>
        </div>
        <div class="col-md-2">
          <div class="mb-2">
            <label class="col-form-label">Balance</label>
            <input type="text" class="form-control text-right" style="color:red" value="@ViewBag.Balance" readonly />
        </div>
        </div>
        <div class="col-md-2">
        <div class="mb-2">
            <label class="col-form-label">Invoice Type</label>
            @Html.DropDownList("Type", new List<SelectListItem>
           {
            new SelectListItem{ Text="All", Value = "All" },
               new SelectListItem{ Text="Customer", Value = "Customer" },
               new SelectListItem{ Text="Forwarding Agents", Value = "Forwarding Agents" },
               new SelectListItem{ Text="Sundry Suppliers", Value = "Sundry Suppliers" }
              }, "", new { @class = "form-select blue_border" })
        </div>
        </div>
          <div class="col-md-1">
        <div class="mb-2 mt-2">
        <button type="button" class="btn btn-success waves-effect waves-light filter btn_top" id="btnreport" onclick="location.href='@Url.Action("AcOpeningInvoiceIndex", "Accounts")?type=' + $('#Type').val()">
                            <i class="bx bx-search mt-1" style="font-size: 21px;"></i>
                        </button>
</div>
</div>
        <div class="col-md-3 text-md-end">
            <div class="mb-2 mt-2">
<a  class="btn btn-primary waves-effect waves-light btn_top" href="/Accounts/AcOpeningInvoice"><i class="mdi mdi-plus me-1"></i> New AcOpeningInvoice</a>
             
            </div>
        </div>
    </div>
    </div>
    </div>
    
    @if (TempData["SuccessMsg"] != null)
    {
        <script type="text/javascript">
                  $(document).ready(function () {
                      //$.notify("@TempData["SuccessMsg"]", "success");
                 });
        </script>
    }
<div class="card">
<div class="card-body">

      <table class="table table-bordered mb-0" id="datatable" style="width:100%">
                <thead class="table-light">
                <tr>
                    <th>
                        Party Type
                    </th>
                    <th>
                        Party Name
                    </th>
                    <th>
                        Debit
                    </th>
                    <th>
                        Credit
                    </th>                                        
                    <th>Action</th>
                </tr>
            </thead>

           
            <tbody>
                @foreach (var item in Model)
                {

                    <tr>

                        <td>
                            @Html.DisplayFor(modelItem => item.PartyType)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.PartyName)                            
                        </td>

                        <td class="text-right">
                            @if (item.Debit > 0)
                            { 
                                @Net4Courier.Models.CommonFunctions.GetDecimalFormat(item.Debit, "3")
                            }

                        </td>
                        <td class="text-right">
                            @if (item.Credit > 0)
                            {
                                @Net4Courier.Models.CommonFunctions.GetDecimalFormat(item.Credit, "3")
                            }
                        </td>                                               
                        
                        <td>
                            
                            <a href="@Url.Action("AcOpeningInvoice", new { id = item.PartyID,invoicetype=item.StatusSDSC })" class="text-success"><i class="mdi mdi-pencil font-size-18"></i></a>                            
                            
                        </td>
                    </tr>
                }
            </tbody>

        </table>
    </div>

</div>
</div>