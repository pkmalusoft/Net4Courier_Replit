@model Net4Courier.Models.RevenueType

@{
     
    ViewBag.pTitle = "Revenue & Cost Type";
    ViewBag.pageTitle = "Setup";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>

    .searchdiv {
        background-color: #fff;
        width: 100%;
        margin: 0 auto;
        max-width: 765px;
        padding: 20px;
        margin-top: 25px;
        border-radius: 10px;
        box-shadow: 0 9px 23px rgba(0, 0, 0, 0.09), 0 5px 5px rgba(0, 0, 0, 0.06) !important;
    }

    
</style>
<script type="text/javascript">
    $(document).ready(function () {
        $("#RevenueType1").focus();
        var Acheadid = '@ViewBag.AcheadId';
        if (Acheadid == 0 || Acheadid == null || Acheadid == "") {

        } else {
            $("#AcHeadID").val(Acheadid);
        }

        $(":text").css({ "border-radius": "5px" });
        $("select").css({ "border-radius": "5px" });
        $('#CostAcHeadID').val($('#CostAcHeadID').attr('value'));
        //$("#RevenueCost").blur(function () {
        //    var wt = $(this).val();
        //    $("#RevenueCost").val(parseFloat(wt).toFixed(2));
        //});
        //$("#MinimumValue").blur(function () {
        //    var wt = $(this).val();
        //    $("#MinimumValue").val(parseFloat(wt).toFixed(2));
        //});
        $('#RevenueGroup').change(function () {
            console.log($('#RevenueGroup').val());
            var revgroup = $('#RevenueGroup').val();
            if (revgroup == 'Revenue') {
                $('#AcHeadID').attr('required', 'required');
                $('#AcHeadID').removeAttr('readonly');
                $('#CostAcHeadID').removeAttr('required');
                $('#CostAcHeadID').val(0).trigger('change');
                $('#CostAcHeadID').attr('readonly', 'readonly');
                $('#CostAcHeadID').removeClass('form-select');
                $('#CostAcHeadID').addClass('form-control');

                $('#AcHeadID').addClass('form-select');
                $('#AcHeadID').removeClass('form-control');

            }
            else if (revgroup == 'Cost') {
                $('#AcHeadID').removeAttr('required');
                $('#CostAcHeadID').attr('required', 'required');
                $('#CostAcHeadID').removeAttr('readonly');
                $('#AcHeadID').val(0).trigger('change');
                $('#AcHeadID').attr('readonly', 'readonly');
                $('#AcHeadID').removeClass('form-select');
                $('#AcHeadID').addClass('form-control');

                $('#AcHeadID').removeClass('form-select');
                $('#AcHeadID').addClass('form-control');
            }
            else if (revgroup == 'OtherRevenue') { 
                $('#AcHeadID').attr('required', 'required');
                $('#CostAcHeadID').removeAttr('required');
                $('#CostAcHeadID').val(0).trigger('change');
                $('#CostAcHeadID').attr('readonly', 'readonly');
                $('#CostAcHeadID').removeClass('form-select');
                $('#CostAcHeadID').addClass('form-control');
                $('#AcHeadID').addClass('form-select');
                $('#AcHeadID').removeClass('form-control');
            }


        })
        //$("#btnsave").click(function () {


        //    $.ajax({
        //                type: "get",
        //                url: "/revenuetype/getrevenuetypename",
        //                datatype: "json",
        //                data: { name: $('#RevenueType1').val(), achead: $('#AcHeadID option:selected').val() },
        //                success: function (data) {
        //                    if (data.flag == 0) {
        //                        $("#flag").val('0');
        //                    }
        //                    else if (data.flag == 1) {
        //                        $("#flag").val('1');
        //                    }
        //                }

        //            });



        //    var rev = $("#RevenueType1").val();
        //    var achead = $("#AcHeadID option:selected").val();
        //    var revco = $("#RevenueCode").val();

        //    $("#alert1").hide();
        //    $("#alert").hide();


        //    if (rev == "") {
        //        $("#alert").show();
        //        return false;
        //    }
        //    else if (achead == "") {
        //        $("#alert").show();
        //        return false;
        //    }

        //    else if ($("#flag").val()=="1") {
        //        $("#alert").hide();
        //        $("#alert1").show();
        //        return false;
        //    }
        //    else {
        //        $("#alert1").hide();
        //        $("#alert").hide();
        //        return true;
        //    }


        //});
        $('#RevenueGroup').trigger('change');
    });
</script>

<div class="row">
        <div class="col-xl-12">
            <div class="card">
                <div class="card-body">

                    @if (ViewBag.SuccessMsg != null)
                    {
                    <script type="text/javascript">
                      $(document).ready(function () {
                          var msg='@ViewBag.SuccessMsg';
                          Swal.fire("Data Validation",msg, "error");
                        });
                    </script>
                    }

        @using (Html.BeginForm("Create", "RevenueType", FormMethod.Post, new { @class = "needs-validation ", @novalidate = "novalidate", @id = "quickAWB" }))
                    {
                        @Html.AntiForgeryToken()
                        @Html.ValidationSummary(true, "", new { @class = "needs-validation" })

                        <div class="searchdiv" style="max-width: 465px !important;">

                            <fieldset>
                                <div id="alert" style="color:red;display:none;margin-left:10px;">*Please fill mandatory fields</div>
                                <div id="alert1" style="color:red;display:none;margin-left:10px;">*Revenue Type Already Exist</div>
                                <div class="row no-margin">



                                    <div class="col-md-12 mb-2">
                                        <label class="required headinglabel">Revenue & Cost Component</label>
                                        @Html.TextBoxFor(model => model.RevenueType1, new { @class = "form-control txttarget", @required = "required" })
                                        @Html.ValidationMessageFor(model => model.RevenueType1)

                                    </div>


                                    <div class="col-md-12 mb-2">
                                        <label class="headinglabel">Revenue Code</label>
                                        @Html.TextBoxFor(model => model.RevenueCode, new { @class = "form-control", @required = "required" })

                                        @Html.ValidationMessageFor(model => model.RevenueCode)
                                    </div>

                                    <div class="col-md-12 mb-2">
                                        <label class=" headinglabel">Revenue Group</label>
                                        @Html.DropDownListFor(model => model.RevenueGroup, new SelectList(@ViewBag.RevenueGroup, "TypeName", "TypeName", Model.RevenueGroup), "Select", new { @class = "form-select", @id = "RevenueGroup", @required = "required" })
                                        @*@Html.DropDownList("RevenueGroup", new SelectList(@ViewBag.RevenueGroup, "TypeName", "TypeName", Model.RevenueGroup), "Select", new { @class = "form-select", @id = "RevenueGroup" })*@
                                        @Html.ValidationMessageFor(model => model.RevenueGroup)

                                    </div>
                                </div>
                                <div class="row no-margin">
                                    <div class="col-md-11 mb-2">
                                        <label class="required headinglabel">Sales Chart-of-Account</label>
                                        @Html.DropDownListFor(model => model.AcHeadID, new SelectList(@ViewBag.accounthead, "AcHeadID", "AcHead1"), "Select", new { @class = "form-select", @required = "required" })
                                        @Html.ValidationMessageFor(model => model.AcHeadID)
                                    </div>
                                    <div class="col-md-1 btn_top">
                                        <a href="/Accounts/CreateAcHead?id=0&frmpage=2" class="plus_icon"><i class="bx bx-plus-medical"></i></a>

                                    </div>
                                </div>
                                <div class="row no-margin">
                                    <div class="col-md-11 mb-2">
                                        <label class="required headinglabel">Cost Chart-of-Account</label>
                                        @Html.DropDownListFor(model => model.CostAcHeadID, new SelectList(@ViewBag.costaccounthead, "AcHeadID", "AcHead1"), "Select", new { @class = "form-select",@value=Model.CostAcHeadID })
                                        @Html.ValidationMessageFor(model => model.CostAcHeadID)
                                    </div>
                                    <div class="col-md-1 btn_top">
                                        <a href="/Accounts/CreateAcHead?id=0&frmpage=3" class="plus_icon"><i class="bx bx-plus-medical"></i></a>

                                    </div>
                                </div>
                                <div class="row no-margin">
                                    <div class="col-md-12">
                                        <label class="required col-form-label">Branch</label>
                                        @Html.DropDownListFor(model => model.BranchID, new SelectList(ViewBag.Branches, "BranchID", "BranchName"), new { @class = "form-select txttarget", @required = "required" })
                                    </div>
                                </div>
                                    @*<div class="row no-margin">
                <div class="col-md-6">
                    <label class="headinglabel">Revenue Cost</label>
                    @Html.TextBoxFor(model => model.RevenueCost, new { @class = "form-control textright", @Value = "0" })
                    @Html.ValidationMessageFor(model => model.RevenueCost)

                </div>


                <div class="col-md-6">
                    <label class="headinglabel">Minimum Value</label>
                    @Html.TextBoxFor(model => model.MinimumValue, new { @class = "form-control textright", @Value = "0" })
                    @Html.ValidationMessageFor(model => model.MinimumValue)
                </div>

            </div>*@






                                    <div class="col-md-12 mt-3">
                                        <a href='@Url.Action("Index", "RevenueType", new { id = 0 })' class="float-right btn btn-dark btnwid">Cancel</a>
                                        <input type="submit" value="Save" class="btn btn-success float-right me-2" id="btnsave" />



                                    </div>




                            </fieldset>
                        </div>
                    }

                </div>
        </div>      </div>
        </div>

 