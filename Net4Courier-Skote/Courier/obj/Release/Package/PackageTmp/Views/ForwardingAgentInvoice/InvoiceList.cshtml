
@model Net4Courier.Models.SupplierInvoiceVM
@{
    int i = 0;
    var _decimal = @Session["Decimal"].ToString();

}
<script>
     function SetDecimal() {
        debugger;

        var idtext = 'txtnetvalue_';

        $('[id^=' + idtext + ']').each(function (index, item) {

            if ($(item).val() == "" || $(item).val() == null) {
                $(item).val(0);
            }
            else {
                var amt = $(item).val();
                $(item).val(parseFloat(amt).toFixed(@_decimal));
            }

        });
         idtext = 'txttaxamt_';
         $('[id^=' + idtext + ']').each(function (index, item) {

            if ($(item).val() == "" || $(item).val() == null) {
                $(item).val(0);
            }
            else {
                var amt = $(item).val();
                $(item).val(parseFloat(amt).toFixed(@_decimal));
            }

        });

    }
    function CalculateTax(index) {
        debugger;
        var amount = $('#txtamount_' + index).val();
        var taxper = $('#txttax_' + index).val();
        var taxamount = parseFloat(amount) * parseFloat(taxper) / 100;
        taxamount = parseFloat(taxamount).toFixed(@_decimal);
        $('#txttaxamt_' + index).val(parseFloat(taxamount).toFixed(@_decimal));
        var nettotal = parseFloat(amount) - parseFloat(taxamount);
        $('#txtnetvalue_' + index).val(nettotal);
        ValidateTotal();
    }
</script>
<div class="col-md-12 table-responsive">
    <table class="table table-bordered " id="details" style="background-color: white">

        <thead>
            <tr>
                <th>S.No.</th>
                <th>Chart Of Accounts</th>
                <th>Particulars</th>
                <th>Qty</th>
                <th>Rate</th>
                <th>Value</th>
                <th>Tax(%)</th>
                <th>Tax Amount</th>
                <th>Net Value</th>
                <th></th>
            </tr>
        </thead>
        <tbody class="input-table" id="detailsbody">
            @foreach (var item in Model.Details)
            {
                <tr>
                    <td>
                        @(i + 1)
                        @Html.HiddenFor(mode => mode.Details[i].SupplierInvoiceDetailID)
                        @Html.HiddenFor(mode => mode.Details[i].SupplierInvoiceID)
                        @Html.HiddenFor(mode => mode.Details[i].AcHeadId)
                        @Html.HiddenFor(mode => mode.Details[i].Particulars)
                        @Html.HiddenFor(mode => mode.Details[i].Quantity)
                        @Html.HiddenFor(mode => mode.Details[i].Rate)
                        @Html.HiddenFor(mode => mode.Details[i].Amount, new { @id = "txtamount_" + @i })

                    </td>
                    <td>
                        @item.AcHeadName
                    </td>
                    <td>
                        @item.Particulars
                    </td>
                    <td class="text-right">
                        @item.Quantity
                    </td>
                    <td class="text-right">
                        @Net4Courier.Models.CommonFunctions.GetFormatNumber(@item.Rate, _decimal)
                    </td>
                    <td class="text-right">
                        @Net4Courier.Models.CommonFunctions.GetFormatNumber(@item.Amount, _decimal)
                    </td>
                    <td>
                        @Html.TextBoxFor(mode => mode.Details[i].TaxPercentage, new { @class = "form-control-sm textright", @id = "txttax_" + @i, @onchange = "CalculateTax(" + @i + ")" })
                    </td>
                    <td>
                        @Html.TextBoxFor(mode => mode.Details[i].TaxAmount, new { @class = "form-control-sm textright", @id = "txttaxamt_" + @i, @readonly = "readonly", @style = "background-color:#dedede" })
                    </td>
                    <td>
                        @Html.TextBoxFor(mode => mode.Details[i].Value, new { @class = "form-control-sm textright", @id = "txtnetvalue_" + @i, @readonly = "readonly", @style = "background-color:#dedede" })
                    </td>
                </tr>
                i++;
            }
        </tbody>
    </table>

   
</div>



          
