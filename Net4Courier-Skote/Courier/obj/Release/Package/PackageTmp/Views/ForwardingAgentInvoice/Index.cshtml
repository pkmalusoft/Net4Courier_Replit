@model Net4Courier.Models.SupplierInvoiceSearch

@{
    ViewBag.Title = "Invoice List";
    ViewBag.pTitle = "Forwarding Agent";
    ViewBag.pageTitle = "Account Payable";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var isadd = true;
    var ismodify = true;
    var isdelete = true;
    var isprint = true;
    var isview = true;
    string path = "/ForwardingAgentInvoice/Index";
    if (Convert.ToInt32(Session["UserRoleID"]) > 1)
    {
        Net4Courier.Models.SourceMastersModel obj = new Net4Courier.Models.SourceMastersModel();
        isadd = obj.GetAddpermission(Convert.ToInt32(Session["UserRoleID"]), path);
        ismodify = obj.GetModifypermission(Convert.ToInt32(Session["UserRoleID"]), path);
        isdelete = obj.GetDeletepermission(Convert.ToInt32(Session["UserRoleID"]), path);
        isprint = obj.GetPrintpermission(Convert.ToInt32(Session["UserRoleID"]), path);
        isview = obj.GetViewpermission(Convert.ToInt32(Session["UserRoleID"]), path);

    }
}
 

<style>
    tfoot {
        display: table-header-group;
    }

    table input {
        width: 100%;
    }
</style>
 

 
 
    @if (TempData["SuccessMsg"] != null)
    {
        <script type="text/javascript">
                      $(document).ready(function () {
                          $.notify("@TempData["SuccessMsg"]", "success");
                });
        </script>
    }

    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

<div class="card">
    <div class="card-body">
        <div class="row">

            <div class="col-md-2">
                <div class="mb-2">
                    <label class="col-form-label">From Date</label>
                    <div class="docs-datepicker">
                        <div class="input-group">
                            <input type="text" class="form-control docs-date" name="FromDate" id="FromDate" value="@Model.FromDate.ToShortDateString()"
                                   placeholder="Pick a From Date" autocomplete="off">
                            <button type="button"
                                    class="btn btn-secondary docs-datepicker-trigger"
                                    disabled>
                                <i class="mdi mdi-calendar" aria-hidden="true"></i>
                            </button>
                        </div>
                        <div class="docs-datepicker-container"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="mb-2">
                    <label class="col-form-label">To Date</label>
                    <div class="docs-datepicker">
                        <div class="input-group">
                            <input type="text" class="form-control docs-date" name="ToDate" id="ToDate" data-date-format="dd/MM/yyyy" data-date-autoclose="true" data-provide="datepicker" value="@Model.ToDate.ToShortDateString()"
                                   placeholder="Pick a date" autocomplete="off">
                            <button type="button"
                                    class="btn btn-secondary docs-datepicker-trigger"
                                    disabled>
                                <i class="mdi mdi-calendar" aria-hidden="true"></i>
                            </button>
                        </div>
                        <div class="docs-datepicker-container"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <label for="Receipt No." class="col-form-label">Invoice No.</label>
                @Html.TextBoxFor(mode => mode.InvoiceNo, new { @class = "form-control text-right" })
            </div>
            <div class="col-md-2">
                <div class="mb-2">
                    <button type="submit" class="btn btn-success waves-effect waves-light filter btn_top">
                        <i class="bx bx-revision mt-1" style="font-size: 21px;"></i>
                    </button>
                </div>
            </div>

            <div class="col-md-4 text-md-end">
                <div class="mb-2">
                    @if (@Net4Courier.Models.CommonFunctions.CheckCreateEntryValid() == false || !isadd)
                    {

                        <a disabled class="btn btn-primary waves-effect waves-light  btn_top text-md-end" href="/ForwardingAgentInvoice/Create" title="Create Not allowed in the previous financial year"><i class="mdi mdi-plus me-1"></i> New Invoice</a>
                    }
                    else
                    {
                        <a class="btn btn-primary waves-effect waves-light  btn_top text-md-end" href="/ForwardingAgentInvoice/Create" title="Create Not allowed in the previous financial year"><i class="mdi mdi-plus me-1"></i> New Invoice</a>
                    }


                </div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-body">



        <table class="table table-bordered" id="datatable">
            <thead class="table-light">

                <tr>
                    <th>
                        @Html.Label("Invoice Date")
                    </th>
                    <th>
                        @Html.Label("Invoice No")
                    </th>
                    <th>
                        @Html.Label("Supplier Nme")
                    </th>
                    @*<th>
                            @Html.Label("Supplier Type")
                        </th>*@
                    <th>
                        @Html.Label("Invoice Amount")
                    </th>
                    <th> Action</th>
                </tr>

            </thead>


            <tbody>
                @foreach (var item in Model.Details)
                {
                    <tr>

                        <td class="text-right">

                            @Net4Courier.Models.CommonFunctions.GetShortDateFormat(@item.InvoiceDate)

                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.InvoiceNo)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.SupplierName)
                        </td>

                        <td class="text-right">
                            @*@Html.DisplayFor(modelItem => item.Amount)*@
                            @Net4Courier.Models.CommonFunctions.GetFormatNumber(item.InvoiceTotal, "2")
                        </td>
                        <td>
                            <a class="text-success"  href="@Url.Action("Edit", new { id = item.SupplierInvoiceID })"><i class="mdi mdi-pencil font-size-18 "></i></a>|
                            <a  class="text-danger" href="#" onclick="Delete(@item.SupplierInvoiceID)"><i class="mdi mdi-delete  font-size-18"></i></a>
                        </td>
                    </tr>

                }
            </tbody>

        </table>
    </div>
</div>
    }
 

    <script type="text/javascript">
        function Delete(ID) {
            if (confirm("Are you sure, You want to Delete Invoice?")) {
                window.location.href = "/ForwardingAgentInvoice/DeleteConfirmed?id=" + ID;
            }
        }
    </script>
