
@{
    
    ViewBag.Title = "Print";
    ViewBag.pTitle = "Customer AWB";
    ViewBag.pageTitle = "Manage AWB Stock";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript">
    $(document).ready(function () {
        $("#AWBNOFrom").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: '/AWBPrepaid/GetAWB',
                    datatype: "json",
                    data: {
                        term: request.term, id: $('#Id').val()
                    },
                    success: function (data) {
                        response($.map(data, function (val, item) {
                            return {
                                label: val.AWBNo,
                                value: val.AWBNo,

                            }
                        }))
                    }
                })
            },
            minLength: 1,
            autoFocus: false,
            focus: function (event, ui) {
                $("#AWBNOFrom").val(ui.item.value);

            },
            select: function (e, i) {
                e.preventDefault();
                $("#AWBNOFrom").val(i.item.value);
            },

        });

        $("#AWBNOTo").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: '/AWBPrepaid/GetAWB',
                    datatype: "json",
                    data: {
                        term: request.term, id: $('#Id').val()
                    },
                    success: function (data) {
                        response($.map(data, function (val, item) {
                            return {
                                label: val.AWBNo,
                                value: val.AWBNo,

                            }
                        }))
                    }
                })
            },
            minLength: 1,
            autoFocus: false,
            focus: function (event, ui) {
                $("#AWBNOTo").val(ui.item.value);

            },
            select: function (e, i) {
                e.preventDefault();
                $("#AWBNOTo").val(i.item.value);
            },

        });

        $('#btnPrint').click(function () {
            $.ajax({
                type: "POST",
                url: "/AWBPrepaid/ShowAWBPrintReport",
                datatype: "Json",
                data: {
                    id: $('#Id').val(), AWBNOFrom: $('#AWBNOFrom').val(), AWBNOTo: $('#AWBNOTo').val()
                },
                success: function (response) {
                    $.ajax({
                        type: "POST",
                        url: "/Accounts/ReportFrame",
                        datatype: "Json",                        
                        success: function (response) {
                            $('#reportframe1').html(response);
                        }

                    });
                }

            });

        })

     
    });
</script>
@using (Html.BeginForm("Create", "AWBPrepaid", FormMethod.Post, new { @id = "FormReceipt" }))
{
<div class="row">
    <div class="col-xs-4 col-md-2">
        <div class="mb-2">
            <input type="hidden" value="@ViewBag.Id" id="Id" />
            <label class=" required col-form-label">Start AWB Number</label>
            <input type="text" class="form-select" id="AWBNOFrom" name="AWBNOFrom" />

        </div>
    </div>

    <div class="col-xs-4 col-md-2">
        <div class="mb-2">
            <label class=" required col-form-label">End AWB Number</label>
            <input type="text" class="form-select" id="AWBNOTo" name="AWBNOTo" />
        </div>
    </div>
    <div class="col-xs-2 col-md-2 mt-2">
        <div class="mb-2">
            <input type="button" class="btn btn-success btn_top" id="btnPrint" value="Print" name="Command" />
        </div>
    </div>
    <div class="col-md-6 mt-2 text-md-end">
        <div class="mb-2">        

            <a href='@Url.Action("Index", "AWBPrepaid", new { id = 0 })' class="btn btn-secondary btn_top">Cancel</a>
        </div>
    </div>
</div>
    }

    <div class="row no-margin" style="padding-top:10px" id="reportframe1">
        @{ Html.RenderAction("ReportFrame", "Accounts");}
        @*<iframe src=@ViewBag.ReportOutput width="100%" height="600px"></iframe>*@
    </div>