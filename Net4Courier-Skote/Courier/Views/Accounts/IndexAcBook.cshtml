@model Net4Courier.Models.AcJournalSearch
@{

    Layout = "~/Views/Shared/_Layout.cshtml";
    var isadd = true;
    var ismodify = true;
    var isdelete = true;
    var isprint = true;
    string path = Request.Url.AbsolutePath.ToLower();

    //if (Convert.ToInt32(Session["UserRoleID"]) > 1)
    //{
    //    TempleApp.Model.SourceMastersModel obj = new TempleApp.Model.SourceMastersModel();
    //    isadd = obj.GetAddpermission(Convert.ToInt32(Session["UserRoleID"]), path);
    //    ismodify = obj.GetModifypermission(Convert.ToInt32(Session["UserRoleID"]), path);
    //    isdelete = obj.GetDeletepermission(Convert.ToInt32(Session["UserRoleID"]), path);

    //}

    ViewBag.Title = "List";
    ViewBag.pTitle = "Cash & Bank Book";
    ViewBag.pageTitle = "General Ledger";
}


        @using (@Html.BeginForm("IndexAcBook", "Accounts", FormMethod.Post, new { @class = "form-horizontal" }))
        {
            <div class="card">
    <div class="card-body">
        <div class="row">
            <div class="col-md-2">
                <div class="mb-2">
                    <label for="FromDate" class="col-form-label">From Date</label>
                    @*@Html.TextBoxFor(mode => mode.FromDate, new { @class = "form-control text-right color_blue_border" })*@
                    <div class="docs-datepicker">
                        <div class="input-group">
                            <input type="text" class="form-control docs-date" name="FromDate" id="FromDate" value="@Model.FromDate.ToShortDateString()"
                                   placeholder="Pick a From Date" autocomplete="off">
                            <button type="button"
                                    class="btn btn-secondary docs-datepicker-trigger"
                                    disabled>
                                <i class="mdi mdi-calendar" aria-hidden="true"></i>
                            </button>
                        </div>
                        <div class="docs-datepicker-container"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-2">
                <div class="mb-2">
                    <label for="FromDate" class="col-form-label">To Date</label>
                    <div class="docs-datepicker">
                        <div class="input-group">
                            <input type="text" class="form-control docs-date" name="ToDate" id="ToDate" value="@Model.ToDate.ToShortDateString()"
                                   placeholder="Pick a To Date" autocomplete="off">
                            <button type="button"
                                    class="btn btn-secondary docs-datepicker-trigger"
                                    disabled>
                                <i class="mdi mdi-calendar" aria-hidden="true"></i>
                            </button>
                        </div>
                        <div class="docs-datepicker-container"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="mb-2">
                    <label class="col-form-label">Trans Type</label>
                    @Html.DropDownListFor(model => model.VoucherType, ViewBag.VoucherTypes as SelectList, new { @class = "form-select" })
                </div>
            </div>
            <div class="col-md-2">
                <div class="mb-2">
                    <label class="col-form-label">Voucher No.</label>
                    @Html.TextBoxFor(model => model.VoucherNo,new { @class = "form-control" })
                </div>
            </div>
            <div class="col-md-2">
                <div class="mb-2 mt-2">
                    @*<a class="btn btn-success waves-effect waves-light filter mt-3 refresh_btn" href="Javascript:void(0)" onclick="location.href='@Url.Action("IndexAcBook", "Accounts")?VoucherType=' + $('#VoucherType').val() + '&FromDate=' + $('#FromDate').val() + '&ToDate=' + $('#ToDate').val()"><i class="mdi mdi-refresh mt-1"></i></a>*@
                    <button type="submit" class="btn btn-success waves-effect waves-light filter btn_top">
                        <i class="bx bx-revision mt-1" style="font-size: 21px;"></i>
                    </button>
                </div>
            </div>
            <div class="col-md-2 mt-4 text-md-end">
                <div class="mb-2 mt-2">

                    @if (@Net4Courier.Models.CommonFunctions.CheckCreateEntryValid() == false || (!isadd))
                    {

                        <a disabled class="btn btn-primary waves-effect waves-light" href="/Accounts/CreateAcBook"><i class="mdi mdi-plus me-1"></i> New Cash & Book</a>
                    }
                    else
                    {

                        <a class="btn btn-primary waves-effect waves-light" href="/Accounts/CreateAcBook"><i class="mdi mdi-plus me-1"></i> New Cash & Book</a>
                    }
                </div>
            </div>

        </div>
</div></div>
 <div class="card">
  <div class="card-body">
            <table id="datatablesaccount" class="table display table-bordered table-striped">
                <thead class="table-light">
                    <tr>
                        @*  <th>
                                 @Html.Label("Transaction Type")
                            </th>
                        *@
                        <th>
                           Transaction Date
                        </th>
                        <th>
                            Voucher No
                        </th>
                        <th>
                            Account Head
                        </th>
                        <th>
                           Amount
                        </th>
                        <th>
                            Narration
                        </th>
                        <th></th>
                        <th style="display:none;"></th>
                    </tr>
                </thead>


                <tbody>
                    @foreach (var item in Model.Details)
                    {
                        <tr>
                            <td class="details-control">
                                <img src="/assets/images/details_open.png" id="plus_minus" style="cursor: pointer;" />

                                @Net4Courier.Models.CommonFunctions.GetShortDateFormat((item.TransDate))
                            </td>
                            <td class="tdtarget">
                                @Html.DisplayFor(modelItem => item.VoucherNo)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.MasterHead)
                            </td>
                            <td class="tdtarget textright">
                                @string.Format("{0:n2}", item.MasterHeadAmount)
                            </td>
                            <td class="tdtarget">
                                @Html.DisplayFor(modelItem => item.Remarks)
                            </td>
                            <td>
                                <div class="d-flex gap-3">
                                @*  @Html.ActionLink("Edit", "Edit", new { id=item.CountryID }) |
                                    @Html.ActionLink("Details", "Details", new { id=item.CountryID }) |
                                    @Html.ActionLink("Delete", "Delete", new { id=item.CountryID })*@
                                @if (ismodify)
                                {
                                    <a href="@Url.Action("CreateAcBook", new { id = item.AcJournalID })" class="text-success"><i class="mdi mdi-pencil font-size-18"></i></a>
                                }
                                @if (isdelete)
                                {
                                    <a onclick="DeleteCashBankEntry(ID=@item.AcJournalID)" href="#" class="text-danger"><i class="mdi mdi-delete font-size-18"></i></a>
                                }
                                @if (isprint)
                                {
                                    <a onclick="funExportToPDF(@item.AcJournalID)" href="#" class="text-secondary"><i class="mdi mdi-printer font-size-18"></i></a>
                                }
                                </div>


                            </td>
                            <td style="display:none;">
                                @item.AcJournalID
                            </td>
                        </tr>
                    }
                <tbody>
            </table>
                </div>
</div>
        }





@section scripts{
    <script src="~/Scripts/JS/AccountBook.js"></script>
}

