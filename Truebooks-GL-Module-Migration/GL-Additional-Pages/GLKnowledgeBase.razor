@page "/gl/knowledge-base"
@using Microsoft.AspNetCore.Components
@inject IJSRuntime JSRuntime

<MudText Typo="Typo.h4" Class="mb-4">
    <MudIcon Icon="fas fa-book" Class="mr-2" />
    General Ledger Knowledge Base
</MudText>

<MudPaper Class="pa-4 mb-4" Elevation="2">
    <MudGrid>
        <MudItem xs="12" md="8">
            <MudTextField @bind-Value="searchText" 
                          Label="Search Knowledge Base" 
                          Placeholder="Enter text to search..."
                          Variant="Variant.Outlined"
                          Adornment="Adornment.Start"
                          AdornmentIcon="@Icons.Material.Filled.Search"
                          Immediate="true"
                          Clearable="true" />
        </MudItem>
    </MudGrid>
</MudPaper>

<MudPaper Class="pa-4" Elevation="2">
    <div class="knowledge-base-content">
        <h1>General Ledger Module Documentation</h1>
        
        <h2>Overview</h2>
        <p>The General Ledger (GL) module is the core of the financial accounting system. It manages the chart of accounts, journal entries, financial periods, and generates financial statements including Balance Sheet, Income Statement, and Trial Balance.</p>
        
        <h2>Key Features</h2>
        <ul>
            <li><strong>Chart of Accounts:</strong> Hierarchical account structure with multiple levels</li>
            <li><strong>Journal Entries:</strong> Manual and automated journal vouchers</li>
            <li><strong>Financial Periods:</strong> Period management with opening/closing controls</li>
            <li><strong>Opening Balances:</strong> Initial balance entry for new fiscal years</li>
            <li><strong>Year-End Closing:</strong> Automated closing entries and balance forward</li>
            <li><strong>Multi-Currency:</strong> Support for transactions in multiple currencies</li>
            <li><strong>Deferred Revenue:</strong> Recognition scheduling and automation</li>
        </ul>
        
        <h2>Getting Started</h2>
        
        <h3>1. Chart of Accounts Setup</h3>
        <p>Configure your chart of accounts with the following account types:</p>
        <ul>
            <li>Assets (Current, Fixed, Other)</li>
            <li>Liabilities (Current, Long-term)</li>
            <li>Equity (Capital, Retained Earnings)</li>
            <li>Revenue (Operating, Other)</li>
            <li>Expenses (Operating, Administrative, Other)</li>
        </ul>
        
        <h3>2. Financial Calendar</h3>
        <p>Set up your fiscal year and define financial periods (monthly, quarterly, or custom).</p>
        
        <h3>3. Opening Balances</h3>
        <p>Enter opening balances for all balance sheet accounts when starting a new fiscal year or migrating from another system.</p>
        
        <h2>Module Components</h2>
        
        <h3>Journal Vouchers</h3>
        <p>Create and manage journal entries with full audit trail. Supports:</p>
        <ul>
            <li>Manual journal entries</li>
            <li>Recurring journals</li>
            <li>Reversing entries</li>
            <li>Multi-currency transactions</li>
        </ul>
        
        <h3>Financial Periods</h3>
        <p>Control posting to specific periods. Periods can be:</p>
        <ul>
            <li>Open - Allows new postings</li>
            <li>Closed - No modifications allowed</li>
            <li>Locked - Permanent closure</li>
        </ul>
        
        <h3>Opening Balances</h3>
        <p>Enter initial balances using the Opening Balance Equity account as a temporary clearing account.</p>
        
        <h3>Year-End Closing</h3>
        <p>Automated wizard for:</p>
        <ul>
            <li>Closing income and expense accounts</li>
            <li>Transferring net income to retained earnings</li>
            <li>Creating opening balances for new year</li>
        </ul>
        
        <h3>Deferred Revenue</h3>
        <p>Manage revenue recognition schedules for services billed in advance.</p>
        
        <h2>Reports</h2>
        <ul>
            <li>Trial Balance</li>
            <li>Balance Sheet</li>
            <li>Income Statement (Profit & Loss)</li>
            <li>General Ledger Detail</li>
            <li>Account Statement</li>
            <li>Journal Register</li>
        </ul>
        
        <h2>Integration</h2>
        <p>The General Ledger receives postings from:</p>
        <ul>
            <li>Accounts Receivable (Customer invoices and receipts)</li>
            <li>Accounts Payable (Vendor bills and payments)</li>
            <li>Inventory (Stock movements and adjustments)</li>
            <li>Cash & Bank (Bank transactions)</li>
            <li>All vertical modules (Courier, Logistics, etc.)</li>
        </ul>
    </div>
</MudPaper>

<style>
    .knowledge-base-content {
        line-height: 1.6;
    }
    
    .knowledge-base-content h1 {
        font-size: 2rem;
        font-weight: 600;
        margin-top: 2rem;
        margin-bottom: 1rem;
        color: var(--mud-palette-primary);
        border-bottom: 2px solid var(--mud-palette-primary);
        padding-bottom: 0.5rem;
    }
    
    .knowledge-base-content h2 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        color: var(--mud-palette-text-primary);
        border-bottom: 1px solid var(--mud-palette-divider);
        padding-bottom: 0.25rem;
    }
    
    .knowledge-base-content h3 {
        font-size: 1.25rem;
        font-weight: 600;
        margin-top: 1.25rem;
        margin-bottom: 0.5rem;
        color: var(--mud-palette-text-primary);
    }
    
    .knowledge-base-content p {
        margin-bottom: 1rem;
    }
    
    .knowledge-base-content ul {
        margin-bottom: 1rem;
        padding-left: 2rem;
    }
    
    .knowledge-base-content li {
        margin-bottom: 0.5rem;
    }
</style>

@code {
    private string searchText = "";
}
